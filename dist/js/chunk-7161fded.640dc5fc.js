(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7161fded"],{"0836":function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"myGuess"},[i("div",{staticClass:"tlits"},[i("div",{staticClass:"likes"},[t._t("tile",[t._v("猜你喜欢")])],2),i("div",{staticClass:"huang",on:{click:t.ff_gai}},[i("span",{staticClass:"iconfont icon-jiazai"}),t._v(" 换一批 ")])]),i("div",{staticClass:"bodys"},t._l(t.newDates,(function(s,e){return i("router-link",{key:e,staticClass:"kyus",attrs:{to:{name:"Details",query:{pid:s.pid}}}},[i("img",{attrs:{src:s.smallImg}}),i("div",{staticClass:"xiangqing"},[i("p",[t._v(t._s(s.name))]),i("p",[t._v(t._s(s.enname))]),i("p",[i("span",[t._v("￥"+t._s(s.price))]),i("span",[t._v("￥"+t._s(s.price-0+16))]),i("van-icon",{attrs:{name:"plus"}})],1)])])})),1)])},a=[],n=(i("a342"),{name:"Guess",props:["newDates"],data:function(){return{isNum:!0}},methods:{ff_gai:function(){this.isNum=!this.isNum;var t=this.isNum?"coffee":"rena_ice",s="type";this.$emit("gai",{type:t,key:s})}}}),c=n,o=(i("a00e"),i("2877")),r=Object(o["a"])(c,e,a,!1,null,"4aace346",null);s["a"]=r.exports},"159b":function(t,s,i){var e=i("da84"),a=i("fdbc"),n=i("17c2"),c=i("9112");for(var o in a){var r=e[o],f=r&&r.prototype;if(f&&f.forEach!==n)try{c(f,"forEach",n)}catch(u){f.forEach=n}}},"17c2":function(t,s,i){"use strict";var e=i("b727").forEach,a=i("a640"),n=i("ae40"),c=a("forEach"),o=n("forEach");t.exports=c&&o?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,s,i){"use strict";var e=i("23e7"),a=i("17c2");e({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"7d52":function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"myCat"},[i("div",{staticClass:"topImg"}),t.isBodys?i("div",{ref:"catBody",staticClass:"catBody"},[i("div",{staticClass:"Tops"},[i("span",[t._v("食品与小食订单")]),i("span",[t._v("自提/外送")]),i("span",{on:{click:t.ff_Allrovems}},[i("span",{staticClass:"iconfont icon-lajitong"}),t._v(" 清空 ")])]),i("div",{staticClass:"Bodys"},t._l(t.Dates,(function(s,e){return i("van-swipe-cell",{key:e,attrs:{disabled:!s.ischeack},scopedSlots:t._u([{key:"right",fn:function(){return[i("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除",type:"danger"},on:{click:function(i){return t.ff_rovemCount(s)}}})]},proxy:!0}],null,!0)},[i("van-checkbox",{staticClass:"myCheck",attrs:{"icon-size":"22px","checked-color":"#6d87c4"},on:{change:t.ff_cheacks},model:{value:s.ischeack,callback:function(i){t.$set(s,"ischeack",i)},expression:"item.ischeack"}}),i("van-card",{staticClass:"goods-card",attrs:{price:s.price,desc:s.rule,title:s.name,thumb:s.small_img}}),s.isHots?i("span",{staticClass:"hots"},[t._v("Hots")]):t._e(),i("span",{staticClass:"original"},[t._v(t._s(s.price-0+18))]),i("van-stepper",{attrs:{theme:"round","button-size":"22","disable-input":""},on:{change:function(i){return t.ff_addCount(s)}},model:{value:s.count,callback:function(i){t.$set(s,"count",i)},expression:"item.count"}})],1)})),1),i("div",{ref:"tail",staticClass:"tail",class:{newTail:t.isSocll}},[i("div",{staticClass:"lefts"},[i("p",{staticClass:"join"},[t._v("合计"),i("span",[t._v("￥"+t._s(t.priceObj.newDate))]),i("span",[t._v("￥"+t._s(t.priceObj.costDate))])]),i("van-checkbox",{attrs:{"checked-color":"#6d87c4","icon-size":"24px"},on:{click:function(s){return t.ff_Allcheack(t.isCheck)}},model:{value:t.isCheck,callback:function(s){t.isCheck=s},expression:"isCheck"}},[t._v("全选")])],1),i("div",{staticClass:"rights"},[i("p",{on:{click:function(s){return t.goPath("Pay")}}},[t._v("优惠后￥"+t._s(t.priceObj.newDate)+",去结算")]),i("p",[t._v("已享受更低优惠,优惠后共减免￥"+t._s(t.priceObj.costDate-0-(t.priceObj.newDate-0)))])])])]):t._e(),t.isBodys?t._e():i("div",{staticClass:"kong"},[i("router-link",{staticClass:"buttons",attrs:{to:{name:"Menu"}}},[t._v("去喝一杯")])],1),i("Guess",{attrs:{newDates:t.newLis},on:{gai:function(s){return t.ff_gai(s)}}})],1)},a=[],n=(i("4160"),i("159b"),i("8965"),i("a342"),i("0836")),c={name:"Cat",data:function(){return{Dates:[],newLis:[],priceObj:{costDate:0,newDate:0,ultiDate:0,ultiDiffer:0},isCheck:!0,oldCheck:[],isBodys:!1,isSocll:!1}},created:function(){this.$route.query.isPay,this.$toast.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner"}),this.useId&&this.ff_shopCats(),this.ff_Like()},mounted:function(){var t=this;setTimeout((function(){t.ff_huaK()}),500)},methods:{ff_Allcheack:function(){for(var t=0;t<this.Dates.length;t++)this.Dates[t].ischeack=this.isCheck;this.ff_sum()},ff_cheacks:function(){for(var t=0;t<this.Dates.length;t++)this.oldCheck.push(this.Dates[t].ischeack);this.ff_sum();for(var s=0;s<this.Dates.length;s++)if(!this.Dates[s].ischeack)return void(this.isCheck=!1);this.isCheck=!0},ff_addCount:function(t){var s=this;this.axios({url:"/modifyShopcartCount",method:"POST",data:{appkey:this.appkey,tokenString:this.useId,sid:t.sid,count:t.count}}).then((function(t){6e3==t.data.code&&s.ff_sum()})).catch((function(t){}))},ff_rovemCount:function(t){var s=[];s.push(t.sid);var i=JSON.stringify(s);this.ff_rovems(i)},ff_sum:function(){var t=0,s=0;this.Dates.forEach((function(i){i.ischeack&&(t+=(i.price-0)*(i.count-0),s+=(i.price-0+16)*(i.count-0))})),this.priceObj.costDate=s,this.priceObj.newDate=t,this.priceObj.ultiDate=0==t?0:t-25,this.priceObj.ultiDiffer=s-this.priceObj.ultiDate},ff_shopCats:function(){var t=this;this.axios({url:"/findAllShopcart",method:"GET",params:{appkey:this.appkey,tokenString:this.useId}}).then((function(s){if(5e3==s.data.code){var i=s.data.result;i.forEach((function(t,s){t.ischeack=!0,t.isHots=Math.floor(10*Math.random())>5})),t.Dates=i,t.ff_sum(),0==t.Dates.length?t.isBodys=!1:t.isBodys=!0}})).catch((function(t){}))},ff_Allrovems:function(){var t=[];this.Dates.forEach((function(s){s.ischeack&&t.push(s.sid)}));var s=JSON.stringify(t);this.ff_rovems(s)},ff_rovems:function(t){var s=this;this.useId?this.axios({url:"/deleteShopcart",method:"POST",data:{appkey:this.appkey,tokenString:this.useId,sids:t}}).then((function(t){7e3==t.data.code&&(s.ff_shopCats(),s.ff_huaK())})).catch((function(t){})):(this.$toast("请先登录"),setTimeout((function(){s.$router.push("Login")}),500))},ff_gai:function(t){this.ff_Like(t.key,t.type)},ff_Like:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"isHot",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.axios({url:"/typeProducts",method:"GET",params:{appkey:this.appkey,key:s,value:i}}).then((function(s){t.newLis=s.data.result})).catch((function(t){}))},ff_huaK:function(){var t=this,s=this.$refs.catBody;if(s){var i=this.$refs.tail,e=s.offsetHeight+40-document.body.clientHeight-40;if(i){var a=i.offsetTop;a>=document.body.clientHeight-40?this.isSocll=!0:this.isSocll=!1,window.addEventListener("scroll",(function(s){s.path[1].pageYOffset<e?t.isSocll=!0:t.isSocll=!1}))}}},goPath:function(t){var s=[];this.Dates.forEach((function(t){t.ischeack&&s.push(t.sid)}));var i=JSON.stringify(s);this.$router.push({name:t,query:{sids:i}})}},components:{Guess:n["a"]}},o=c,r=i("2877"),f=Object(r["a"])(o,e,a,!1,null,"41643ab4",null);s["default"]=f.exports},8965:function(t,s,i){},"9f28":function(t,s,i){},a00e:function(t,s,i){"use strict";i("9f28")},a342:function(t,s,i){},a640:function(t,s,i){"use strict";var e=i("d039");t.exports=function(t,s){var i=[][t];return!!i&&e((function(){i.call(null,s||function(){throw 1},1)}))}},b727:function(t,s,i){var e=i("0366"),a=i("44ad"),n=i("7b0b"),c=i("50c4"),o=i("65f0"),r=[].push,f=function(t){var s=1==t,i=2==t,f=3==t,u=4==t,l=6==t,h=5==t||l;return function(d,p,v,m){for(var _,k,y=n(d),C=a(y),g=e(p,v,3),b=c(C.length),S=0,D=m||o,L=s?D(d,b):i?D(d,0):void 0;b>S;S++)if((h||S in C)&&(_=C[S],k=g(_,S,y),t))if(s)L[S]=k;else if(k)switch(t){case 3:return!0;case 5:return _;case 6:return S;case 2:r.call(L,_)}else if(u)return!1;return l?-1:f||u?u:L}};t.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6)}},fdbc:function(t,s){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-7161fded.640dc5fc.js.map