(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-686fb534"],{"159b":function(t,i,a){var s=a("da84"),e=a("fdbc"),n=a("17c2"),c=a("9112");for(var r in e){var o=s[r],u=o&&o.prototype;if(u&&u.forEach!==n)try{c(u,"forEach",n)}catch(f){u.forEach=n}}},"17c2":function(t,i,a){"use strict";var s=a("b727").forEach,e=a("a640"),n=a("ae40"),c=e("forEach"),r=n("forEach");t.exports=c&&r?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,i,a){"use strict";var s=a("23e7"),e=a("17c2");s({target:"Array",proto:!0,forced:[].forEach!=e},{forEach:e})},"75d0":function(t,i,a){},"76a1":function(t,i,a){"use strict";a.r(i);var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"myPay"},[a("van-nav-bar",{attrs:{title:"确认订单","left-arrow":""},on:{"click-left":t.goBack}}),a("div",{staticClass:"times"},[t._v("预计到餐 约"+t._s(t.times)+"可取")]),a("van-address-list",{attrs:{list:t.list,"default-tag-text":"默认"},on:{edit:function(i){return t.onEdit("Location")}}}),a("div",{staticClass:"indent"},[t._l(t.Lists,(function(i,s){return a("van-card",{key:s,attrs:{num:i.count,price:i.price,desc:i.rule,title:i.name,thumb:i.small_img,"origin-price":i.price-0+16},scopedSlots:t._u([{key:"tags",fn:function(){return[a("van-tag",{attrs:{plain:"",type:"danger"}},[t._v(t._s(i.drop))])]},proxy:!0}],null,!0)})})),t._m(0),a("div",{staticClass:"total"},[a("span",[t._v("合计")]),a("span",[t._v("￥"+t._s(t.priceObj.ultiDate))]),a("span",[t._v("￥"+t._s(t.priceObj.costDate))])])],2),a("div",{staticClass:"way"},[a("div",{staticClass:"wallet",on:{click:t.ff_maintain}},[a("span",[t._v("咖啡钱包")]),a("span",[t._v("无可用")])]),a("div",{staticClass:"WeChat",on:{click:t.ff_maintain}},[a("span",[t._v("支付方式")]),a("span",{staticClass:"icon-xiangyoubiao iconfont"}),a("span",[t._v("微信支付")]),a("span",{staticClass:"iconfont icon-weixinzhifu"})])]),a("div",{staticClass:"require",on:{click:t.ff_maintain}},[a("span",[t._v("备注特殊要求")]),a("span",{staticClass:"icon-xiangyoubiao iconfont"})]),a("div",{staticClass:"base"},[a("p",{staticClass:"price"},[a("span",[t._v("总价￥"+t._s(t.priceObj.costDate))]),a("span",[t._v("优惠￥"+t._s(t.priceObj.ultiDiffer))]),a("span",[t._v("实付￥"+t._s(t.priceObj.ultiDate))])]),a("span",{staticClass:"buts",on:{click:t.ff_affirm}},[t._v("去支付")])])],1)},e=[function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("p",{staticClass:"delivery"},[t._v(" 配送费"),a("span",[t._v("(配送费6元)")]),a("span",[t._v("￥6")])])}],n=(a("99af"),a("4160"),a("b0c0"),a("159b"),a("a342"),a("75d0"),{name:"Pay",data:function(){return{Lists:[],times:"10:23",list:[],priceObj:{costDate:0,ultiDate:0,ultiDiffer:0},phone:"",address:"",receiver:"",sids:""}},created:function(){var t=this;if(setInterval((function(){t.ff_times()}),1e3),this.useId){this.sids=this.$route.query.sids;var i=this.sids;this.ff_Shopcart(i),this.axios({url:"/findAddress",method:"GET",params:{appkey:this.appkey,tokenString:this.useId}}).then((function(i){if(2e4==i.data.code)for(var a=0;a<i.data.result.length;a++){var s=i.data.result[a];if(1==s.isDefault){var e=s;e.address="".concat(s.city).concat(s.county," (").concat(s.addressDetail,")"),t.list.push(e),t.phone=s.tel,t.address="".concat(s.city).concat(s.county," (").concat(s.addressDetail,")"),t.receiver=s.name;break}}})).catch((function(t){}))}else this.$toast("请先登录"),this.$router.push({name:"Login"});setTimeout((function(){t.sum()}),500)},methods:{goBack:function(){this.$router.go(-1)},ff_times:function(){var t=new Date,i=t.getHours(),a=t.getMinutes()+25;a>=60&&(a=a-0-60,a=a<10?"0".concat(a):a,i+=1,i=i>23?0:i,i=i<10?"0".concat(i):i),this.times="".concat(i,":").concat(a)},onEdit:function(t){this.$router.push({name:t})},ff_Shopcart:function(t){var i=this;this.axios({url:"/commitShopcart",method:"GET",params:{appkey:this.appkey,tokenString:this.useId,sids:t}}).then((function(t){if(5e4==t.data.code){var a=t.data.result;a.forEach((function(t){t.drop="商品直降"})),i.Lists=a}})).catch((function(t){}))},sum:function(){var t=0,i=0;this.Lists.forEach((function(a){t+=(a.price-0+16)*(a.count-0),i+=(a.price-0)*(a.count-0)})),this.priceObj.costDate=t+6,this.priceObj.ultiDate=i,this.priceObj.ultiDiffer=t-i},ff_affirm:function(){var t=this;this.axios({url:"/pay",method:"POST",data:{appkey:this.appkey,tokenString:this.useId,sids:this.sids,phone:this.phone,address:this.address,receiver:this.receiver}}).then((function(i){6e4==i.data.code&&(t.$toast("支付成功"),setTimeout((function(){t.$router.push({name:"Order"})}),300))})).catch((function(t){}))},ff_maintain:function(){this.$toast.loading({message:"维护中...",forbidClick:!0,loadingType:"spinner"})}}}),c=n,r=a("2877"),o=Object(r["a"])(c,s,e,!1,null,"2b2a0364",null);i["default"]=o.exports},a342:function(t,i,a){},a640:function(t,i,a){"use strict";var s=a("d039");t.exports=function(t,i){var a=[][t];return!!a&&s((function(){a.call(null,i||function(){throw 1},1)}))}},b0c0:function(t,i,a){var s=a("83ab"),e=a("9bf2").f,n=Function.prototype,c=n.toString,r=/^\s*function ([^ (]*)/,o="name";s&&!(o in n)&&e(n,o,{configurable:!0,get:function(){try{return c.call(this).match(r)[1]}catch(t){return""}}})},b727:function(t,i,a){var s=a("0366"),e=a("44ad"),n=a("7b0b"),c=a("50c4"),r=a("65f0"),o=[].push,u=function(t){var i=1==t,a=2==t,u=3==t,f=4==t,l=6==t,d=5==t||l;return function(p,h,v,m){for(var _,b,y=n(p),g=e(y),L=s(h,v,3),S=c(g.length),k=0,C=m||r,D=i?C(p,S):a?C(p,0):void 0;S>k;k++)if((d||k in g)&&(_=g[k],b=L(_,k,y),t))if(i)D[k]=b;else if(b)switch(t){case 3:return!0;case 5:return _;case 6:return k;case 2:o.call(D,_)}else if(f)return!1;return l?-1:u||f?f:D}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},fdbc:function(t,i){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-686fb534.d84212d8.js.map